include "std/io/faio";

proc async_do_after (
    clock:Faio::alarm_clock_t,
    delta:double,
    p:Faio::alarm_clock_t->0 )
{
  proc fthread () {
    Faio::sleep (clock, delta);
    p (clock);
  }
  spawn_fthread fthread;
}

proc p (clock:Faio::alarm_clock_t)
{
  println$ "Hello world!";
}

var clock = #Faio::mk_alarm_clock;
async_do_after (clock, 5.0, p);
println$ "Continuing on!";
